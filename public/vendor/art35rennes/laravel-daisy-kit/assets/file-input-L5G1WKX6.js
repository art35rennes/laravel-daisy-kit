function w(n){const t=document.createElement("div");if(t.className="relative rounded-box overflow-hidden border border-base-300 bg-base-200/50 aspect-video",(n.name||"").toLowerCase(),n.type.startsWith("image/")){const e=document.createElement("img");e.className="h-full w-full object-cover",e.alt=n.name;const s=URL.createObjectURL(n);e.src=s,e.onload=()=>URL.revokeObjectURL(s),t.append(e)}else if(n.type.startsWith("video/")){const e=document.createElement("video");e.className="h-full w-full object-cover",e.controls=!0,e.src=URL.createObjectURL(n),t.append(e)}else if(n.type.startsWith("audio/")){const e=document.createElement("audio");e.controls=!0,e.className="w-full",e.src=URL.createObjectURL(n);const s=document.createElement("div");s.className="flex items-center justify-center h-full bg-base-200",s.append(e),t.append(s)}else{const e=document.createElement("div");e.className="flex items-center justify-center h-full text-xs text-center p-2",e.textContent=n.name||"Fichier",t.append(e)}return t}function m(n){if(!n||n.__fiInit)return;n.__fiInit=!0;const t=n.querySelector('input[type="file"]');if(!t)return;const e=n.querySelector("[data-dropzone]"),s=n.querySelector("[data-previews]"),h=n.dataset.preview==="true";if(n.dataset.multiple==="true")try{t.multiple=!0}catch{}const d=(t.getAttribute("accept")||"").toLowerCase().split(",").map(r=>r.trim()).filter(Boolean),u=r=>{if(!d.length)return!0;const a=(r.type||"").toLowerCase(),l=(r.name||"").toLowerCase(),c=l.lastIndexOf("."),o=c>=0?l.slice(c):"";for(const i of d)if(i.startsWith(".")){if(o===i)return!0}else if(i.endsWith("/*")){const v=i.split("/")[0];if(a&&a.startsWith(v+"/"))return!0}else if(a===i)return!0;return!1};function p(r){!h||!s||(s.innerHTML="",Array.from(r||[]).forEach(a=>s.append(w(a))))}n.addEventListener("click",r=>{r.target.closest("[data-dropzone]")&&t.click()}),e&&(["dragenter","dragover"].forEach(r=>e.addEventListener(r,a=>{a.preventDefault(),e.classList.add("border-primary")})),["dragleave","drop"].forEach(r=>e.addEventListener(r,a=>{a.preventDefault(),e.classList.remove("border-primary")})),e.addEventListener("drop",r=>{const a=r.dataTransfer;if(!a)return;const c=Array.from(a.files||[]).filter(u);if(c.length){if(window.DataTransfer){const o=new DataTransfer;t.multiple&&t.files?.length&&Array.from(t.files).forEach(i=>o.items.add(i)),t.multiple?c.forEach(i=>o.items.add(i)):o.items.add(c[0]),t.files=o.files}p(t.files?.length?t.files:c),t.dispatchEvent(new Event("change",{bubbles:!0}))}})),t.addEventListener("change",()=>{if(d.length&&t.files?.length&&window.DataTransfer){const r=Array.from(t.files).filter(u);if(r.length!==t.files.length){const a=new DataTransfer;r.forEach(l=>a.items.add(l)),t.files=a.files}}p(t.files)})}function f(){document.querySelectorAll('[data-fileinput="1"]').forEach(m)}window.DaisyFileInput={init:m,initAll:f};document.readyState==="loading"?document.addEventListener("DOMContentLoaded",f):f();
