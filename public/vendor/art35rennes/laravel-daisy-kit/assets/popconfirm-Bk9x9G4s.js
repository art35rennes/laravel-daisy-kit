function l(n){document.querySelectorAll(".popconfirm-panel").forEach(c=>{c!==n&&c.classList.add("hidden")})}function m(n){const c=n.querySelector(".popconfirm-trigger"),e=n.querySelector(".popconfirm-panel");if(!c||!e)return;const i=t=>{n.contains(t.target)||(e.classList.add("hidden"),document.removeEventListener("click",i,{capture:!0}),document.removeEventListener("keydown",o))},o=t=>{t.key==="Escape"&&(e.classList.add("hidden"),document.removeEventListener("click",i,{capture:!0}),document.removeEventListener("keydown",o))};c.addEventListener("click",t=>{t.preventDefault();const d=e.classList.contains("hidden");if(l(e),d){e.classList.remove("hidden");const a=e.querySelector("[data-popconfirm-action]");a&&a.focus(),document.addEventListener("click",i,{capture:!0}),document.addEventListener("keydown",o)}else e.classList.add("hidden")}),e.addEventListener("click",t=>{const d=t.target.closest("[data-popconfirm-action]");if(!d)return;const s=d.getAttribute("data-popconfirm-action")==="confirm"?"popconfirm:confirm":"popconfirm:cancel";n.dispatchEvent(new CustomEvent(s,{bubbles:!0})),e.classList.add("hidden")})}function p(){document.addEventListener("click",n=>{const c=n.target.closest("[data-popconfirm-modal]");if(c){const i=c.getAttribute("data-popconfirm-modal"),o=document.getElementById(i);o&&o.showModal&&o.showModal()}const e=n.target.closest("[data-popconfirm-modal-target][data-popconfirm-action]");if(e){const i=e.getAttribute("data-popconfirm-action"),o=e.getAttribute("data-popconfirm-modal-target"),t=document.getElementById(o),d=i==="confirm"?"popconfirm:confirm":"popconfirm:cancel";t&&(t.dispatchEvent(new CustomEvent(d,{bubbles:!0})),t.close&&t.close())}})}function r(){document.querySelectorAll("[data-popconfirm]").forEach(m),p()}window.DaisyPopconfirm={initAll:r};document.readyState==="loading"?document.addEventListener("DOMContentLoaded",r):r();
