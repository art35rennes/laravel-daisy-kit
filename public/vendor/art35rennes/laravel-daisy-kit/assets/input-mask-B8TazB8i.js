function A(t,n){const a={9:/[0-9]/,a:/[A-Za-z]/,"*":/[A-Za-z0-9]/};return t&&n&&t.length===n.length&&t.forEach((e,o)=>{try{const s=String(n[o]),h=s.startsWith("/")&&s.lastIndexOf("/")>0?s.slice(1,s.lastIndexOf("/")):s;a[e]=new RegExp(h)}catch{}}),a}function E(t,n){const a=[];for(let e=0;e<t.length;e+=1){const o=t[e];n[o]?a.push({type:"slot",test:n[o],key:o}):a.push({type:"static",value:o})}return a}function I(t,n){let a="";return t.forEach(e=>{e.type==="slot"?a+=n:a+=e.value}),a}function R(t,n){const a=[];let e=0;for(let o=0;o<t.length;o+=1){const s=t[o];for(;e<n.length&&n[e].type==="static";){s===n[e].value&&(e+=1),e+=0;break}for(;e<n.length&&n[e].type!=="slot";)e+=1;if(e>=n.length)break;n[e].test.test(s)&&(a.push(s),e+=1)}return a}function w(t,n,a){const{maskPlaceholder:e,charPlaceholder:o}=a;let s="",h=0;n.forEach(r=>{r.type==="static"?s+=r.value:h<t.length?s+=t[h++]:e&&(s+=o)});const d=h>=t.length&&n.filter(r=>r.type==="slot").length===t.length;return{value:s,isCompleted:d}}class b{constructor(n,a={}){this.input=n,this.options=Object.assign({inputMask:"",charPlaceholder:"_",maskPlaceholder:!1,inputPlaceholder:!0,clearIncomplete:!0,customMask:"",customValidator:""},a);const e=(this.options.customMask||"").split(",").map(s=>s.trim()).filter(Boolean),o=(this.options.customValidator||"").split(",").map(s=>s.trim()).filter(s=>s!=null&&s!=="");this.defs=A(e,o),this.tokens=E(this.options.inputMask||"",this.defs),this.onInput=this.onInput.bind(this),this.onBlur=this.onBlur.bind(this),this._init()}_init(){this.options.inputPlaceholder&&this.input.setAttribute("placeholder",I(this.tokens,this.options.charPlaceholder)),this.renderFromRaw(this.getRawValueFromInput()),this.input.addEventListener("input",this.onInput),this.input.addEventListener("blur",this.onBlur)}getRawValueFromInput(){const n=this.input.value||"";return R(n,this.tokens)}renderFromRaw(n){const{value:a,isCompleted:e}=w(n,this.tokens,this.options);this.input.value=a;const o=new CustomEvent("inputmask:change",{detail:{value:a},bubbles:!0});this.input.dispatchEvent(o),e&&this.input.dispatchEvent(new CustomEvent("inputmask:completed",{detail:{value:a},bubbles:!0}))}onInput(){const n=this.getRawValueFromInput();this.renderFromRaw(n)}onBlur(){if(this.options.clearIncomplete){const n=this.getRawValueFromInput(),a=this.tokens.filter(e=>e.type==="slot").length;n.length<a&&(this.input.value="")}}dispose(){this.input.removeEventListener("input",this.onInput),this.input.removeEventListener("blur",this.onBlur),delete this.input.__daisyMask}static getInstance(n){return n.__daisyMask||null}}function _(t){if(!t||t.__daisyMask)return;const n={inputMask:t.getAttribute("data-mask")||"",charPlaceholder:t.getAttribute("data-char-placeholder")||"_",maskPlaceholder:t.getAttribute("data-mask-placeholder")==="true",inputPlaceholder:t.getAttribute("data-input-placeholder")!=="false",clearIncomplete:t.getAttribute("data-clear-incomplete")!=="false",customMask:t.getAttribute("data-custom-mask")||"",customValidator:t.getAttribute("data-custom-validator")||""};t.__daisyMask=new b(t,n)}function v(){document.querySelectorAll('input[data-inputmask="1"]').forEach(_)}function k(t){if(!t||t.__obfInit)return;t.__obfInit=!0;const n=parseInt(t.getAttribute("data-obfuscate-keep-end")||"0",10)||0,a=t.getAttribute("data-obfuscate-char")||"*";let e=null;const o=t.getAttribute("name");let s=t.value||"";o&&(e=document.createElement("input"),e.type="hidden",e.name=o,e.value=s,t.removeAttribute("name"),t.insertAdjacentElement("afterend",e)),t.__obfReal=s;function h(r){const c=String(r||"");if(!c.length)return"";const m=Math.max(0,Math.min(n,c.length)),l=Math.max(0,c.length-m);return(l?a.repeat(l):"")+(m?c.slice(-m):"")}function d(){t.value=h(t.__obfReal),e&&(e.value=t.__obfReal),t.dispatchEvent(new CustomEvent("obfuscate:change",{detail:{value:t.__obfReal},bubbles:!0}))}d(),t.addEventListener("beforeinput",r=>{try{const c=r.inputType,m=r.data;let l=t.selectionStart??t.value.length,u=t.selectionEnd??t.value.length;l=Math.max(0,Math.min(l,t.__obfReal.length)),u=Math.max(0,Math.min(u,t.__obfReal.length));let i=t.__obfReal;if(c==="insertText"){const f=m??"";i=i.slice(0,l)+f+i.slice(u);const p=l+f.length;t.__obfReal=i,r.preventDefault(),d(),requestAnimationFrame(()=>{try{t.setSelectionRange(p,p)}catch{}});return}if(c==="insertFromPaste"){const f=m??"";i=i.slice(0,l)+f+i.slice(u);const p=l+f.length;t.__obfReal=i,r.preventDefault(),d(),requestAnimationFrame(()=>{try{t.setSelectionRange(p,p)}catch{}});return}if(c==="deleteContentBackward"){l===u?(l>0&&(i=i.slice(0,l-1)+i.slice(u)),l=Math.max(0,l-1)):i=i.slice(0,l)+i.slice(u),t.__obfReal=i,r.preventDefault(),d(),requestAnimationFrame(()=>{try{t.setSelectionRange(l,l)}catch{}});return}if(c==="deleteContentForward"){l===u?i=i.slice(0,l)+i.slice(Math.min(i.length,u+1)):i=i.slice(0,l)+i.slice(u),t.__obfReal=i,r.preventDefault(),d(),requestAnimationFrame(()=>{try{t.setSelectionRange(l,l)}catch{}});return}r.preventDefault(),d()}catch{}})}function y(){document.querySelectorAll('input[data-obfuscate="1"]').forEach(k)}window.DaisyInputMask={init:_,initAll:v,Class:b,initObfuscate:k,initAllObfuscate:y};function g(){v(),y()}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",g):g();
