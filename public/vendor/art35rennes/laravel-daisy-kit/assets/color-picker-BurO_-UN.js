function b(t,e,n){return Math.min(n,Math.max(e,t))}function v(t){if(!t)return{h:270,s:50,l:50,a:1};const e=String(t).trim();if(e.startsWith("#")){let n,c,a;if(e.length===4||e.length===5){n=parseInt(e[1]+e[1],16),c=parseInt(e[2]+e[2],16),a=parseInt(e[3]+e[3],16);const s=e.length===5?parseInt(e[4]+e[4],16)/255:1;return x(n,c,a,s)}else if(e.length>=7){n=parseInt(e.slice(1,3),16),c=parseInt(e.slice(3,5),16),a=parseInt(e.slice(5,7),16);const s=e.length>=9?parseInt(e.slice(7,9),16)/255:1;return x(n??0,c??0,a??0,s)}return x(n??0,c??0,a??0,1)}try{return L(e)}catch{return{h:270,s:50,l:50,a:1}}}function E({h:t,s:e,l:n,a:c}){return`hsla(${Math.round(t)}, ${Math.round(e)}%, ${Math.round(n)}%, ${+c.toFixed(3)})`}function y({h:t,s:e,l:n,a:c}){let a=(t%360+360)%360,s=e/100,d=n/100;const l=(1-Math.abs(2*d-1))*s,r=l*(1-Math.abs(a/60%2-1)),o=d-l/2;let p=0,i=0,u=0;a<60?(p=l,i=r,u=0):a<120?(p=r,i=l,u=0):a<180?(p=0,i=l,u=r):a<240?(p=0,i=r,u=l):a<300?(p=r,i=0,u=l):(p=l,i=0,u=r);const m=Math.round((p+o)*255),g=Math.round((i+o)*255),f=Math.round((u+o)*255);return{r:m,g,b:f,a:c}}function M({r:t,g:e,b:n,a:c}){return`rgba(${t}, ${e}, ${n}, ${+c.toFixed(3)})`}function F(t,e,n,c=1){const a=o=>o.toString(16).padStart(2,"0"),s=a(Math.max(0,Math.min(255,t))),d=a(Math.max(0,Math.min(255,e))),l=a(Math.max(0,Math.min(255,n))),r=a(Math.round(Math.max(0,Math.min(1,c))*255));return c<1?`#${s}${d}${l}${r}`:`#${s}${d}${l}`}function _(t){const{r:e,g:n,b:c,a}=y(t);return F(e,n,c,a)}function L(t){const e=t.match(/hsla?\(([^)]+)\)/i);if(e){const[c,a,s,d]=e[1].split(",").map(l=>l.trim());return{h:parseFloat(c),s:parseFloat(a),l:parseFloat(s),a:d?parseFloat(d):1}}const n=t.match(/rgba?\(([^)]+)\)/i);if(n){const[c,a,s,d]=n[1].split(",").map(l=>l.trim());return x(parseFloat(c),parseFloat(a),parseFloat(s),d?parseFloat(d):1)}return v("#563d7c")}function x(t,e,n,c=1){t/=255,e/=255,n/=255;const a=Math.max(t,e,n),s=Math.min(t,e,n);let d,l,r=(a+s)/2;if(a===s)d=l=0;else{const o=a-s;switch(l=r>.5?o/(2-a-s):o/(a+s),a){case t:d=(e-n)/o+(e<n?6:0);break;case e:d=(n-t)/o+2;break;case n:d=(t-e)/o+4;break}d*=60}return{h:d,s:l*100,l:r*100,a:c}}function $(t,e){const n=t.querySelector("[data-colorpicker-panel]");if(!n)return;n.innerHTML="",e.__format=e.__format||"hsla";const c=document.createElement("div");c.className="flex items-center gap-2 mb-2";const a=document.createElement("span");a.className="w-6 h-6 rounded-box border",a.style.background=E(e);const s=document.createElement("input");if(s.type="text",s.className="input input-sm input-bordered w-full",s.value=E(e),s.disabled=t.dataset.showInputs!=="true",c.append(a,s),n.append(c),t.dataset.showFormatToggle==="true"){const r=document.createElement("div");r.className="mb-2 flex items-center gap-2";const o=document.createElement("div");o.className="text-xs opacity-70",o.textContent="Format";const p=document.createElement("select");p.className="select select-xs select-bordered",["hsla","rgba","hex"].forEach(i=>{const u=document.createElement("option");u.value=i,u.textContent=i.toUpperCase(),i===e.__format&&(u.selected=!0),p.append(u)}),p.addEventListener("change",()=>{e.__format=p.value,l()}),r.append(o,p),n.append(r)}const d=(r,o,p,i,u,m,g="")=>{const f=document.createElement("label");f.className="block space-y-1";const w=document.createElement("div");w.className="text-xs opacity-70 flex items-center justify-between",w.textContent=r;const h=document.createElement("input");return h.type="range",h.min=String(o),h.max=String(p),h.value=String(i),u!=null&&(h.step=String(u)),h.className="range range-xs "+g,h.setAttribute("aria-label",r),f.append(w,h),h.addEventListener("input",m),n.append(f),h};if(t.dataset.showHue==="true"&&d("Teinte (H)",0,360,e.h,null,r=>{e.h=b(parseFloat(r.target.value),0,360),l()}),d("Saturation (S)",0,100,Math.round(e.s),null,r=>{e.s=b(parseFloat(r.target.value),0,100),l()}),d("Luminance (L)",0,100,Math.round(e.l),null,r=>{e.l=b(parseFloat(r.target.value),0,100),l()}),t.dataset.showAlpha==="true"&&d("Transparence (A)",0,1,e.a,.01,r=>{e.a=b(parseFloat(r.target.value),0,1),l()}),t.dataset.showPalette==="true")try{const r=JSON.parse(t.dataset.swatches||"[]");if(Array.isArray(r)&&r.length){const o=document.createElement("div");o.className="mt-2 grid gap-2",+t.dataset.swatchesHeight>0&&(o.style.maxHeight=t.dataset.swatchesHeight+"px"),o.style.overflow="auto",r.forEach(p=>{const i=document.createElement("div");i.className="flex flex-wrap gap-2",(p||[]).forEach(u=>{const m=document.createElement("button");m.type="button",m.className="w-5 h-5 rounded-box border",m.style.background=u,m.addEventListener("click",()=>{Object.assign(e,v(u)),l()}),i.append(m)}),o.append(i)}),n.append(o)}}catch{}function l(){const r=E(e);if(a.style.background=r,t.dataset.showInputs==="true"){let i=r;if(e.__format==="rgba"){const{r:u,g:m,b:g,a:f}=y(e);i=M({r:u,g:m,b:g,a:f})}else e.__format==="hex"&&(i=_(e));s.value=i}const o=t.querySelector("[data-colorchip]"),p=t.querySelector("[data-colortext]");if(o&&(o.style.background=r),p){let i=r;if(e.__format==="rgba"){const{r:u,g:m,b:g,a:f}=y(e);i=M({r:u,g:m,b:g,a:f})}else e.__format==="hex"&&(i=_(e));p.textContent=i}t.dispatchEvent(new CustomEvent("colorpicker:change",{detail:{value:r},bubbles:!0}))}s.addEventListener("change",()=>{Object.assign(e,v(s.value)),l()})}function k(t){if(!t||t.__cpInit||(t.__cpInit=!0,t.dataset.disabled==="true"))return;const e=v(t.dataset.value||"#563d7c");$(t,e);const n=t.querySelector("[data-colorpicker-trigger]"),c=t.querySelector("[data-colorpicker-panel]"),a=t.querySelector(".dropdown");a&&n&&c&&(n.addEventListener("click",s=>{s.preventDefault(),s.stopPropagation(),a.classList.toggle("dropdown-open")}),document.addEventListener("click",s=>{t.contains(s.target)||a.classList.remove("dropdown-open")}),document.addEventListener("keydown",s=>{s.key==="Escape"&&a.classList.remove("dropdown-open")}))}function S(){document.querySelectorAll('[data-colorpicker="1"]').forEach(k)}window.DaisyColorPicker={init:k,initAll:S};document.addEventListener("DOMContentLoaded",S);
