function S(e){try{const t=e.querySelector("[data-overlay] template[data-items]")?.innerHTML||"[]";return JSON.parse(t)}catch{return[]}}function v(e,n){const t=e.__items||[];if(!t.length)return;n<0&&(n=0),n>=t.length&&(n=t.length-1),e.__index=n;const a=e.querySelector("[data-overlay]"),i=e.querySelector("[data-image]"),c=e.querySelector("[data-caption]"),l=e.querySelector("[data-counter]"),d=t[n];i.src=d.src,i.alt=d.alt||"",c&&(c.textContent=d.caption||""),l&&(l.textContent=`${n+1} / ${t.length}`),a.classList.remove("hidden"),a.removeAttribute("aria-hidden"),document.documentElement.classList.add("overflow-hidden"),document.body.classList.add("overflow-hidden"),u(e),(e.querySelector("[data-close]")||a)?.focus?.(),e.__lastActive=document.activeElement,z(e),e.dispatchEvent(new CustomEvent("lightbox:open",{detail:{index:n},bubbles:!0}))}function m(e){const n=e.querySelector("[data-overlay]");if(n){n.classList.add("hidden"),n.setAttribute("aria-hidden","true"),document.documentElement.classList.remove("overflow-hidden"),document.body.classList.remove("overflow-hidden");try{e.__lastActive?.focus?.()}catch{}e.dispatchEvent(new CustomEvent("lightbox:close",{bubbles:!0}))}}function h(e){const n=e.__items||[];if(!n.length)return;let t=(e.__index??0)+1;t>=n.length&&(t=e.dataset.loop==="true"?0:n.length-1),v(e,t),e.dispatchEvent(new CustomEvent("lightbox:slide",{detail:{index:t},bubbles:!0}))}function _(e){const n=e.__items||[];if(!n.length)return;let t=(e.__index??0)-1;t<0&&(t=e.dataset.loop==="true"?n.length-1:0),v(e,t),e.dispatchEvent(new CustomEvent("lightbox:slide",{detail:{index:t},bubbles:!0}))}function u(e){e.__scale=1,e.__tx=0,e.__ty=0,b(e)}function b(e){const n=e.querySelector("[data-image]"),t=e.__scale||1,a=e.__tx||0,i=e.__ty||0;n.style.transform=`translate(${a}px, ${i}px) scale(${t})`,n.style.cursor=t>1?"grab":"default",e.dispatchEvent(new CustomEvent("lightbox:zoom",{detail:{scale:t},bubbles:!0}))}function f(e,n=.2){e.__scale=Math.min(5,(e.__scale||1)+n),b(e)}function y(e,n=.2){e.__scale=Math.max(.2,(e.__scale||1)-n),b(e)}function q(e){const n=e.querySelector("[data-stage]"),t=e.querySelector("[data-image]");let a=!1,i=0,c=0,l=0,d=0,g=0;t.addEventListener("mousedown",s=>{(e.__scale||1)<=1||(a=!0,i=s.clientX,c=s.clientY,t.style.cursor="grabbing")}),window.addEventListener("mousemove",s=>{if(!a)return;const r=s.clientX-i,E=s.clientY-c;i=s.clientX,c=s.clientY,e.__tx=(e.__tx||0)+r,e.__ty=(e.__ty||0)+E,b(e)}),window.addEventListener("mouseup",()=>{a&&(a=!1,t.style.cursor="grab")}),n.addEventListener("wheel",s=>{e.dataset.zoom==="true"&&(s.preventDefault(),s.deltaY<0?f(e,.1):y(e,.1))},{passive:!1}),n.addEventListener("dblclick",()=>{e.dataset.zoom==="true"&&((e.__scale||1)>1?u(e):f(e,1))}),n.addEventListener("touchstart",s=>{if(!s.touches?.length)return;l=s.touches[0].clientX,d=s.touches[0].clientY;const r=Date.now();r-g<300&&((e.__scale||1)>1?u(e):f(e,1)),g=r},{passive:!0}),n.addEventListener("touchend",s=>{const r=s.changedTouches?.[0]?.clientX??l,E=s.changedTouches?.[0]?.clientY??d,p=r-l,w=E-d;Math.abs(p)>50&&Math.abs(w)<40&&(p<0?h(e):_(e))},{passive:!0})}function x(e){if(document.fullscreenElement){document.exitFullscreen?.();return}e.querySelector("[data-overlay]")?.requestFullscreen?.()}function k(e){const n=e.querySelector("[data-overlay]");n.addEventListener("click",t=>{t.target===n&&m(e)}),e.querySelector("[data-close]")?.addEventListener("click",()=>m(e)),e.querySelector("[data-next]")?.addEventListener("click",()=>h(e)),e.querySelector("[data-prev]")?.addEventListener("click",()=>_(e)),e.querySelector("[data-zoom-in]")?.addEventListener("click",()=>f(e)),e.querySelector("[data-zoom-out]")?.addEventListener("click",()=>y(e)),e.querySelector("[data-zoom-reset]")?.addEventListener("click",()=>u(e)),e.querySelector("[data-fullscreen]")?.addEventListener("click",()=>x(e)),e.dataset.keyboard==="true"&&document.addEventListener("keydown",t=>{n.classList.contains("hidden")||(t.key==="Escape"&&m(e),t.key==="ArrowRight"&&h(e),t.key==="ArrowLeft"&&_(e),(t.key==="+"||t.key==="=")&&e.dataset.zoom==="true"&&f(e),(t.key==="-"||t.key==="_")&&e.dataset.zoom==="true"&&y(e),t.key==="0"&&e.dataset.zoom==="true"&&u(e),t.key.toLowerCase()==="f"&&e.dataset.fullscreen==="true"&&x(e))}),n.addEventListener("keydown",t=>{if(t.key!=="Tab")return;const a=n.querySelectorAll('button, [href], [tabindex]:not([tabindex="-1"])'),i=Array.from(a).filter(d=>!d.hasAttribute("disabled"));if(!i.length)return;const c=i[0],l=i[i.length-1];t.shiftKey&&document.activeElement===c?(l.focus(),t.preventDefault()):!t.shiftKey&&document.activeElement===l&&(c.focus(),t.preventDefault())})}function A(e){e.querySelectorAll("[data-item]")?.forEach(n=>{n.addEventListener("click",()=>{const t=parseInt(n.dataset.index||"0",10);v(e,t)})})}function L(e){!e||e.__lbInit||(e.__lbInit=!0,e.__items=S(e),e.__index=0,u(e),k(e),A(e),q(e))}function o(){document.querySelectorAll('[data-lightbox="1"]').forEach(L)}function z(e){const n=e.__items||[];if(!n.length)return;const t=e.__index??0;[t-1,t+1].forEach(a=>{if(a<0||a>=n.length)return;const i=n[a]?.src;if(!i)return;const c=new Image;c.src=i})}window.DaisyLightbox={init:L,initAll:o,open:(e,n)=>v(e,n||0),close:m,next:h,prev:_,zoomIn:f,zoomOut:y,reset:u};document.readyState==="loading"?document.addEventListener("DOMContentLoaded",o):o();
